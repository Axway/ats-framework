<!doctype html>
<html>
 <head> 
  <title>ATS : Building and deploying an Agent Component</title> 
  <link rel="stylesheet" href="styles/site.css" type="text/css"> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
 </head> 
 <body class="theme-default aui-theme-default"> 
  <div id="page"> 
   <div id="main" class="aui-page-panel"> 
    <div id="main-header"> 
     <a><img class="axway_logo" src="images/AxwayLogo.png" alt="Axway Inc"></a> 
     <div id="breadcrumb-section"> 
      <ol id="breadcrumbs"> 
       <li class="first"> <span><a href="index.html">ATS</a></span> </li> 
       <li> <span><a href="ATS-Documentation.html">ATS Documentation</a></span> </li> 
       <li> <span><a href="ATS-Guide.html">ATS Guide</a></span> </li> 
       <li> <span><a href="Performance-testing.html">Performance testing</a></span> </li> 
       <li> <span><a href="Creating-ATS-actions.html">Creating ATS actions</a></span> </li> 
      </ol> 
     </div> 
     <h1 id="title-heading" class="pagetitle"> <span id="title-text"> ATS : Building and deploying an Agent Component </span> </h1> 
    </div> 
    <div id="content" class="view"> 
     <div id="main-content" class="wiki-content group"> 
      <p>You have created your Agent component here</p> 
      <p>Now it is time to build it.</p> 
      <p><br></p> 
      <hr> 
      <h1 id="BuildinganddeployinganAgentComponent-Building">Building</h1> 
      <p>In Java world, it is easiest to have class and other resources packaged into JAR files.</p> 
      <div class="confluence-information-macro has-no-icon confluence-information-macro-note"> 
       <div class="confluence-information-macro-body"> 
        <p>Currently, we use Maven for all ATS projects, but there is one piece left that still needs to be done by Ant.</p> 
        <p>This piece is the code building your Agent components.</p> 
        <p>Currently Ant is invoked within Maven. We will update this documentation after making this part to run entirely within Maven.</p> 
       </div> 
      </div> 
      <p>So for now you need to copy this the <a href="attachments/119487087/123160954.xml" data-linked-resource-version="1" data-linked-resource-default-alias="pom.xml" data-linked-resource-content-type="text/xml" data-linked-resource-container-version="9">pom.xml</a> and <a href="attachments/119487087/123160955.xml" data-linked-resource-version="1" data-linked-resource-default-alias="build.xml" data-linked-resource-content-type="text/xml" data-linked-resource-container-version="9">build.xml</a> files into the root project folder.</p> 
      <p>Prior to running these files, you may want to change:</p> 
      <ul> 
       <li>The used ATS version as declared in the <em>pom.xml</em></li> 
       <li>The <strong>component.name</strong> parameter in the <em>build.xml</em></li> 
       <li>The class packages in the <em>agent-component-generate-client</em> Ant target.</li> 
      </ul> 
      <p>Currently, all this info is set according to the User Guide examples.<br><br></p> 
      <p>After running the <em>pom.xml</em>, Maven will retrieve the ATS artifacts and will then start Ant with the <em>build.xml</em> file.</p> 
      <p>If everything goes as OK a few seconds later you will see a new folder <em>target</em> and in its <em>dist</em> subfolder, there will be two JAR files.</p> 
      <p>You can go ahead and open these two JAR files to see their content.</p> 
      <h3 id="BuildinganddeployinganAgentComponent-Theproducedserver-sideJAR">The produced server-side JAR</h3> 
      <p>We call it a server-side JAR because it will operate on the side of the Agent. Its name ends with <em>-autoserver.jar</em> because this is how we set it by the build script. This JAR will work like a service accepting commands from the client-side JAR.</p> 
      <p>It has all <em>action classes</em> and their <em>source files</em> in the root folder.</p> 
      <p>It also has the <em>agent_descriptor.xml</em> in its <em>META-INF</em> subfolder<em>.<br></em></p> 
      <h3 id="BuildinganddeployinganAgentComponent-Theproducedclient-sideJAR">The produced client-side JAR</h3> 
      <p>We call it a client-side JAR because it will operate on the side of the Test Executor. Its name ends with <em>-autoclient.jar</em> because this is how we set it by the build script.</p> 
      <p>It also contains classes with the same names as the ones in the server-side JAR, but if you open them you will be surprised by their content.</p> 
      <p>These classes have the same names, their methods have the same names and input arguments as the server-side ones, but their body is very different.</p> 
      <div class="confluence-information-macro has-no-icon confluence-information-macro-note"> 
       <div class="confluence-information-macro-body"> 
        <p>All classes in the client-side JAR are simple and generated by the build procedure and they only contain instructions for the Agent so it knows which server-side class should be executed. Client classes are just like a convenient proxy for local-like execution of the Agent classes (a.k.a. Actions).</p> 
        <p>But you do not really need to bother with them in detail. The simple effect is that by using the client-side class you easily and transparently execute remote code (on the Agent). Also, the execution result is available locally on Test Executor.</p> 
       </div> 
      </div> 
      <p><br></p> 
      <hr> 
      <h1 id="BuildinganddeployinganAgentComponent-Deploying">Deploying</h1> 
      <h3 id="BuildinganddeployinganAgentComponent-Theclient-sideJAR">The client-side JAR</h3> 
      <p>This one must be present in the classpath of the Test Executor. From that point on you can use them in your test code.</p> 
      <h3 id="BuildinganddeployinganAgentComponent-Theserver-sideJAR">The server-side JAR</h3> 
      <p>This one must be placed in the <em> <strong>ats-agent\actions</strong> </em> subfolder of your ATS Agent distribution.</p> 
      <p>Even a fresh Agent will have some such components already available. These are the ones ATS uses internally to do something (like filesystem operations) on the host the Agent is working on.</p> 
      <p>In case your actions depend on some other third party classes, you must place their JARs in the <em> <strong>ats-agent/actions_dependencies</strong> </em> subfolder of your ATS Agent distribution.</p> 
      <div class="confluence-information-macro has-no-icon confluence-information-macro-note"> 
       <div class="confluence-information-macro-body"> 
        <p>You do not have to restart the Agent in case of replacing your component JAR as the <em> <strong>ats-agent/actions</strong> </em> subfolder is constantly monitored and the changes will be picked up in a few seconds.</p> 
        <p>But you will need to restart the Agent when placing JARs in the <em> <strong>ats-agent/actions_dependencies</strong> </em> subfolder.</p> 
       </div> 
      </div> 
      <div class="confluence-information-macro has-no-icon confluence-information-macro-note"> 
       <div class="confluence-information-macro-body"> 
        <p>The Agent log file (placed in <em> <strong>logs</strong> </em> subfolder) will tell you when your component is found and will list the loaded action class names.</p> 
       </div> 
      </div> 
      <p><br></p> 
      <hr> 
      <p>Proceed with <a href="Running-performance-tests.html">running your actions</a> in some performance test.</p> 
      <p>Back to <a href="Creating-ATS-actions.html">parent page</a><p>Go to <a href="./toc.html">Table of Contents</a></p></p> 
      <hr> 
     </div> 
    </div> 
   </div> 
  </div>  
 </body>
</html>
